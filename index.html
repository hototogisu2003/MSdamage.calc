<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ダメージ計算ツール</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* レイアウト修正用の追加スタイル */
        .grid-item {
            display: flex;
            flex-direction: column;
            justify-content: flex-start !important; /* 強制的に上寄せにする */
            gap: 8px; /* チェックボックスと入力欄の間の隙間 */
            height: 100%; /* 高さを揃える */
        }
        
        /* 入力欄等が下に行き過ぎないように調整 */
        .bottom-stack {
            margin-top: 5px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        /* チェックボックスラベルの余白調整 */
        .check-label {
            margin-bottom: 0 !important;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer; /* カーソルを指の形にする */
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ダメージ計算ツール</h1>

    <div class="main-input">
        <label for="attack">攻撃力</label>
        <div class="input-with-checkbox">
            <input type="number" id="attack" placeholder="数値を入力" oninput="calculate()" style="flex: 1;">
            
            <label class="check-label" style="margin-bottom: 0; white-space: nowrap;">
                <input type="checkbox" id="chk_gauge" onchange="calculate()">
                ゲージ (x1.2)
            </label>
        </div>
    </div>

    <div class="category-section">
        <h3 class="category-title">キャラクター倍率</h3>
        
        <div class="grid-4-col">
            
            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_ab1" onchange="calculate()">
                    超ADW (x1.3)
                </label>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_ab2" onchange="calculate()">
                    渾身 (x3.0)
                </label>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_ms" onchange="toggleInput('msSelect', 'chk_ms')">
                    マインスイーパー
                </label>
                <select id="msSelect" onchange="calculate()" disabled>
                    <option value="1.5" selected>無印 (x1.5)</option>
                    <option value="2.0" >M (x2.0)</option>
                    <option value="2.5">L (x2.5)</option>
                    <option value="3.0">EL (x3.0)</option>
                </select>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_warp" onchange="toggleInput('warpCount', 'chk_warp')">
                    超アンチワープ
                </label>
                <input type="number" id="warpCount" placeholder="ワープ数" oninput="calculate()" disabled>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_soko" onchange="toggleInput('sokoSelect', 'chk_soko')">
                    底力
                </label>
                <select id="sokoSelect" onchange="calculate()" disabled>
                    <option value="1.5" selected>無印 (x1.5)</option>
                    <option value="2.0">M (x2.0)</option>
                    <option value="2.5">L (x2.5)</option>
                    <option value="3.0">EL (x3.0)</option>
                </select>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_wboost" onchange="togglewboostInputs()">
                    ウォールブースト
                </label>
                <div class="bottom-stack">
                    <select id="wboostGrade" onchange="calculate()" disabled>
                        <option value="1.5" selected>無印 (×1.5)</option>
                        <option value="2.0">M (×2.0)</option>
                        <option value="2.5">L (×2.5)</option>
                        <option value="3.0">EL (×3.0)</option>
                    </select>
                    <input type="number" id="wboostVal" placeholder="壁数" oninput="calculate()" disabled>
                </div>
            </div> 
            
            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_mboost" onchange="toggleInput('mboostSelect', 'chk_mboost')">
                    魔法陣ブースト
                </label>
                <select id="mboostSelect" onchange="calculate()" disabled>
                    <option value="1.5">無印 (x1.5)</option>
                    <option value="2.0" selected>M (x2.0)</option>
                    <option value="2.5">L (x2.5)</option>
                    <option value="3.0">EL (x3.0)</option>
                </select>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_killer" onchange="toggleInput('killerRate', 'chk_killer')">
                    キラー倍率
                </label>
                <input type="number" id="killerRate" value="1.0" step="0.01" oninput="calculate()" disabled>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_buff" onchange="toggleInput('buffRate', 'chk_buff')">
                    バフ倍率
                </label>
                <input type="number" id="buffRate" value="1.0" step="0.01" oninput="calculate()" disabled>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_guardian" onchange="toggleInput('guardianRate', 'chk_guardian')">
                    守護獣倍率
                </label>
                <input type="number" id="guardianRate" value="1.0" step="0.01" oninput="calculate()" disabled>
            </div>

        </div>
    </div>

    <div class="category-section">
        <h3 class="category-title">紋章</h3>
        
        <div class="grid-4-col">
            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_emb1" onchange="calculate()">
                    対属性 (x1.25)
                </label>
            </div>
            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_emb2" onchange="calculate()">
                    対弱 (x1.10)
                </label>
            </div>
            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_emb3" onchange="calculate()">
                    対将/対兵 (x1.10)
                </label>
            </div>
            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_emb4" onchange="calculate()">
                    守護獣加勢 (x1.08)
                </label>
            </div>
        </div>
    </div>

    <div class="category-section">
        <h3 class="category-title">敵倍率</h3>
        
        <div class="grid-4-col">

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_weak" onchange="toggleInput('weakRate', 'chk_weak')">
                    弱点倍率
                </label>
                <input type="number" id="weakRate" value="3" step="0.01" oninput="calculate()" disabled>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_naguri" onchange="toggleInput('naguriRate', 'chk_naguri')">
                    直殴り倍率
                </label>
                <input type="number" id="naguriRate" value="1" step="0.01" oninput="calculate()" disabled>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_hontai" onchange="toggleInput('hontaiRate', 'chk_hontai')">
                    本体倍率
                </label>
                <input type="number" id="hontaiRate" value="1" step="0.01" oninput="calculate()" disabled>
            </div>

            <div class="grid-item">
                <label class="check-label">
                    <input type="checkbox" id="chk_def" onchange="toggleInput('defRate', 'chk_def')">
                    防御ダウン倍率
                </label>
                <input type="number" id="defRate" value="1" step="0.01" oninput="calculate()" disabled>
            </div>
        </div>
    </div>

    <div class="result-box">
        <span class="result-label">最終ダメージ</span>
        <span id="result" class="result-value">0</span>
    </div>
</div>

<script src="script.js"></script>

</body>
</html>
